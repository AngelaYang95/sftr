'use strict';

const navTemplate = `
			 <style>
.logo {
	margin-left: auto;
}
.nav-bar {
	align-items: center;
	background: #fff;
	color: #0a0a0a;
	border-bottom: 1px solid black;
	display: flex;
	left: 0;
  padding: 32px 24px;
	position: fixed;
	right: 0;
	top: 0;
}

.nav-bar[hide] {
	top: -100px;
}
  </style>
	<slot name="nav-items"></slot>
	<div class="logo">
    <svg height="20px" viewBox="0 0 184 82" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M43.3965 49.9258C43.3965 49.1055 43.2695 48.373 43.0156 47.7285C42.7812 47.0645 42.3418 46.4688 41.6973 45.9414C41.0723 45.3945 40.1836 44.8672 39.0312 44.3594C37.8984 43.832 36.4336 43.2852 34.6367 42.7188C32.6445 42.0938 30.7891 41.3906 29.0703 40.6094C27.3516 39.8281 25.8379 38.9199 24.5293 37.8848C23.2402 36.8496 22.2344 35.6582 21.5117 34.3105C20.7891 32.9434 20.4277 31.3613 20.4277 29.5645C20.4277 27.8066 20.7988 26.2051 21.541 24.7598C22.3027 23.3145 23.377 22.0742 24.7637 21.0391C26.1504 19.9844 27.7812 19.1738 29.6562 18.6074C31.5508 18.041 33.6406 17.7578 35.9258 17.7578C39.0898 17.7578 41.8242 18.334 44.1289 19.4863C46.4531 20.6387 48.25 22.2012 49.5195 24.1738C50.7891 26.1465 51.4238 28.3633 51.4238 30.8242H43.3965C43.3965 29.4961 43.1133 28.3242 42.5469 27.3086C42 26.293 41.1602 25.4922 40.0273 24.9062C38.9141 24.3203 37.5078 24.0273 35.8086 24.0273C34.168 24.0273 32.8008 24.2715 31.707 24.7598C30.6328 25.248 29.8223 25.9121 29.2754 26.752C28.748 27.5918 28.4844 28.5293 28.4844 29.5645C28.4844 30.3457 28.6699 31.0488 29.041 31.6738C29.4121 32.2793 29.9688 32.8555 30.7109 33.4023C31.4531 33.9297 32.3711 34.4277 33.4648 34.8965C34.5781 35.3457 35.8672 35.7949 37.332 36.2441C39.6758 36.9473 41.7266 37.7285 43.4844 38.5879C45.2617 39.4473 46.7363 40.4238 47.9082 41.5176C49.0996 42.6113 49.9883 43.8418 50.5742 45.209C51.1797 46.5762 51.4824 48.1289 51.4824 49.8672C51.4824 51.7031 51.1211 53.3438 50.3984 54.7891C49.6758 56.2344 48.6406 57.4648 47.293 58.4805C45.9453 59.4961 44.3242 60.2676 42.4297 60.7949C40.5547 61.3223 38.4551 61.5859 36.1309 61.5859C34.0605 61.5859 32.0098 61.3125 29.9785 60.7656C27.9668 60.1992 26.1406 59.3594 24.5 58.2461C22.8594 57.1133 21.5508 55.6875 20.5742 53.9688C19.5977 52.2305 19.1094 50.1992 19.1094 47.875H27.1953C27.1953 49.2227 27.4102 50.375 27.8398 51.332C28.2891 52.2695 28.9141 53.041 29.7148 53.6465C30.5352 54.2324 31.4922 54.6621 32.5859 54.9355C33.6797 55.209 34.8613 55.3457 36.1309 55.3457C37.7715 55.3457 39.1191 55.1211 40.1738 54.6719C41.248 54.2031 42.0488 53.5586 42.5762 52.7383C43.123 51.918 43.3965 50.9805 43.3965 49.9258ZM65.75 18.3438V61H57.6934V18.3438H65.75ZM82.9473 36.7715V43.1289H63.6406V36.7715H82.9473ZM85.2031 18.3438V24.7012H63.6406V18.3438H85.2031ZM109.578 18.3438V61H101.551V18.3438H109.578ZM122.82 18.3438V24.7012H88.4551V18.3438H122.82ZM128.182 18.3438H143.68C146.922 18.3438 149.705 18.832 152.029 19.8086C154.354 20.7852 156.141 22.2305 157.391 24.1445C158.641 26.0586 159.266 28.4121 159.266 31.2051C159.266 33.4121 158.875 35.3262 158.094 36.9473C157.312 38.5684 156.209 39.9258 154.783 41.0195C153.377 42.1133 151.717 42.9727 149.803 43.5977L147.283 44.8867H133.602L133.543 38.5293H143.768C145.428 38.5293 146.805 38.2363 147.898 37.6504C148.992 37.0645 149.812 36.2539 150.359 35.2188C150.926 34.1836 151.209 33.002 151.209 31.6738C151.209 30.248 150.936 29.0176 150.389 27.9824C149.842 26.9277 149.012 26.1172 147.898 25.5508C146.785 24.9844 145.379 24.7012 143.68 24.7012H136.238V61H128.182V18.3438ZM152.264 61L142.391 41.8984L150.916 41.8691L160.906 60.5898V61H152.264Z" fill="black"/>
      <rect x="2.5" y="2.5" width="179" height="75" stroke="black" stroke-width="5"/>
    </svg>
  </div>`;

/** SFTR navigation bar that hides on scroll down. */
class NavBar extends HTMLElement {
	constructor() {
		super();

		// Add shadow dom.
    const shadow = this.attachShadow({ mode: 'open' });
    const navContainer = document.createElement('div');
    navContainer.classList.add('nav-bar');
    navContainer.innerHTML = navTemplate;
    shadow.appendChild(navContainer);

		this.isAnimating = false;
		this.oldY = 0;
		this.handleScroll = this.handleScroll.bind(this);
	}

 	connectedCallback() {    
		window.addEventListener("scroll", this.handleScroll);
  }

	handleScroll(e) {
		this.isAnimating = true;

		const target = e.currentTarget;
	  const isScrollUp = this.oldY > target.scrollY;
    if (isScrollUp)
      this.removeAttribute('hide');
    else
      this.setAttribute('hide', '');

    this.oldY = target.scrollY;
	  setTimeout(() => this.isAnimating = false, 500);
	}
}

window.customElements.define('nav-bar', NavBar);
